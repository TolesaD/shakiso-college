<%- include('includes/admin-header') %>

<section class="section">
    <h2>Add New Announcement</h2>
    <form action="/admin/announcements" method="POST">
        <div class="form-group">
            <label for="announcementTitle">Title:</label>
            <input type="text" id="announcementTitle" name="title" required>
        </div>
        <div class="form-group">
            <label for="announcementContent">Content:</label>
            <textarea id="announcementContent" name="content" required></textarea>
        </div>
        <button type="submit" class="btn-submit">Post Announcement</button>
    </form>

    <h3 style="margin-top: 30px;">Manage Announcements</h3>
    <% if (announcements.length > 0) { %>
        <ul class="item-list">
            <% announcements.forEach(announcement => { %>
                <li>
                    <div class="item-details">
                        <h4><%= announcement.title %></h4>
                        <p><%= announcement.content %></p>
                        <p><small>Posted: <%= announcement.date.toLocaleDateString() %></small></p>
                    </div>
                    <div class="item-actions">
                        <form action="/admin/announcements/delete/<%= announcement._id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this announcement?');">
                            <button type="submit" class="btn-danger">Delete</button>
                        </form>
                    </div>
                </li>
            <% }) %>
        </ul>
    <% } else { %>
        <p>No announcements posted yet.</p>
    <% } %>
</section>

<section class="section">
    <h2>Add New Video</h2>
    <form action="/admin/videos" method="POST">
        <div class="form-group">
            <label for="videoTitle">Title:</label>
            <input type="text" id="videoTitle" name="title" required>
        </div>
        <div class="form-group">
            <label for="videoUrl">Video URL (YouTube embed or direct link):</label>
            <input type="text" id="videoUrl" name="url" placeholder="e.g., https://www.youtube.com/embed/VIDEO_ID" required>
        </div>
        <div class="form-group">
            <label for="videoDescription">Description (Optional):</label>
            <textarea id="videoDescription" name="description"></textarea>
        </div>
        <button type="submit" class="btn-submit">Add Video</button>
    </form>

    <h3 style="margin-top: 30px;">Manage Videos</h3>
    <% if (videos.length > 0) { %>
        <ul class="item-list">
            <% videos.forEach(video => { %>
                <li>
                    <div class="item-details">
                        <h4><%= video.title %></h4>
                        <p><a href="<%= video.url %>" target="_blank">View Video</a></p>
                        <p><small>Uploaded: <%= video.uploadedAt.toLocaleDateString() %></small></p>
                    </div>
                    <div class="item-actions">
                        <form action="/admin/videos/delete/<%= video._id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this video?');">
                            <button type="submit" class="btn-danger">Delete</button>
                        </form>
                    </div>
                </li>
            <% }) %>
        </ul>
    <% } else { %>
        <p>No videos added yet.</p>
    <% } %>
</section>

<section class="section">
    <h2>Upload New Photo</h2>
    <form action="/admin/photos" method="POST" enctype="multipart/form-data">
        <div class="form-group">
            <label for="photoTitle">Title:</label>
            <input type="text" id="photoTitle" name="title" required>
        </div>
        <div class="form-group">
            <label for="photoFile">Choose Photo:</label>
            <input type="file" id="photoFile" name="photo" accept="image/*" required>
        </div>
        <div class="form-group">
            <label for="photoDescription">Description (Optional):</label>
            <textarea id="photoDescription" name="description"></textarea>
        </div>
        <button type="submit" class="btn-submit">Upload Photo</button>
    </form>

    <h3 style="margin-top: 30px;">Manage Photos</h3>
    <% if (photos.length > 0) { %>
        <ul class="item-list">
            <% photos.forEach(photo => { %>
                <li>
                    <div class="item-details">
                        <h4><%= photo.title %></h4>
                        <img src="<%= photo.url %>" alt="<%= photo.title %>" style="max-width: 100px; max-height: 100px; border-radius: 5px; margin-top: 10px;">
                        <p><small>Uploaded: <%= photo.uploadedAt.toLocaleDateString() %></small></p>
                    </div>
                    <div class="item-actions">
                        <form action="/admin/photos/delete/<%= photo._id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this photo? This will also delete it from Cloudinary.');">
                            <button type="submit" class="btn-danger">Delete</button>
                        </form>
                    </div>
                </li>
            <% }) %>
        </ul>
    <% } else { %>
        <p>No photos uploaded yet.</p>
    <% } %>
</section>

</body>
</html>